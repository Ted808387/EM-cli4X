(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57d3649a"],{"0256":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),i("section",{staticClass:"product"},[i("div",{staticClass:"product-bg"}),i("div",{staticClass:"allproducts mt-5"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"itemlist"},[t._m(0),i("ul",{staticClass:"pl-0 font-weight-bold list-ul list-unstyled"},[i("li",{staticClass:"list-li omouse",class:{"list-li-focus":"全商品"===t.displayitem},on:{click:function(a){t.displayitem="全商品",t.getpages()}}},[i("div",[t._v("全款商品")])]),i("li",{staticClass:"list-li omouse",class:{"list-li-focus":"面罩"===t.displayitem},on:{click:t.changeitem}},[i("div",[t._v("面罩")])]),i("li",{staticClass:"list-li omouse",class:{"list-li-focus":"口罩"===t.displayitem},on:{click:t.changeitem}},[i("div",[t._v("口罩")])]),i("li",{staticClass:"list-li omouse",class:{"list-li-focus":"防毒面具"===t.displayitem},on:{click:t.changeitem}},[i("div",[t._v("防毒面具")])])]),i("div",{staticClass:"form-group has-search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search_box",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{keyup:function(a){return a.type.indexOf("key")||13===a.keyCode?t.searchprodust(a):null},input:function(a){a.target.composing||(t.search=a.target.value)}}}),t.status.display?t._e():i("span",{staticClass:"fa fa-search search_icon omouse",on:{click:t.searchprodust}}),t.status.display?i("span",{staticClass:"fas fa-spinner fa-spin wait_icon"}):t._e()])])]),i("div",{staticClass:"col-sm-9"},[i("div",{staticClass:"row"},t._l(t.products,(function(a){return i("div",{key:a.id,staticClass:"mb-3 pb-5 col-xl-4 col-md-6",on:{click:function(i){return t.turnproduct(a.id,a.category)}}},[i("div",{staticClass:"card-item omouse"},[i("div",{staticClass:"card-add-item"},[i("div",{staticClass:"card-add-favorite btn btn-primary",on:{click:function(i){return i.stopPropagation(),t.addtoFavorite(a)}}},[t.markfavorite(a)?i("i",{staticClass:"fas fa-heart fa-2x text-black"}):i("i",{staticClass:"fas fa-heart fa-2x"})]),i("div",{staticClass:"card-add-cart btn btn-primary",on:{click:function(i){return i.stopPropagation(),t.addtoCar(a.id,1,a.title)}}},[t.status.loading===a.id?i("i",{staticClass:"fas fa-spinner fa-spin fa-2x"}):t._e(),t.status.loading!==a.id?i("i",{staticClass:"fas fa-shopping-cart fa-2x"}):t._e()])]),i("div",{staticClass:"card-img"},[i("div",{staticClass:"product-img",style:{backgroundImage:"url("+a.imageUrl+")"}})]),i("div",{staticClass:"card-cotnet"},[i("div",{staticClass:"card-category mt-3 text-center"},[i("h5",{staticClass:"mb-0 card-category_item"},[t._v(t._s(a.category))])]),i("div",{staticClass:"card-title mt-1 text-center"},[i("h4",{staticClass:"font-weight-bold"},[t._v(t._s(a.title))])]),i("div",{staticClass:"card-price text-center"},[a.price?t._e():i("div",{staticClass:"card-origin-price"},[t._v(t._s(t._f("currency")(a.origin_price)))]),a.price?i("del",{staticClass:"card-origin-price"},[t._v(t._s(t._f("currency")(a.origin_price)))]):t._e(),i("div",[t._v(t._s(t._f("currency")(a.price)))])])])])])})),0),t.displaypage?i("frontpagination",{attrs:{getpagination:t.pagination},on:{userpage:t.getpages}}):t._e()],1)])])])],1)},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"text-primary itemtitle pl-4 font-weight-bold"},[i("div",[t._v("產品列表")])])}],n=(i("99af"),i("a623"),i("4de4"),i("7db0"),i("c975"),i("45fc"),i("ac1f"),i("841c"),i("1157")),r=i.n(n),c=i("1799"),o={data:function(){return{allproducts:[],pagesproducts:[],displaypage:!1,pagination:{},isLoading:!1,status:{loading:{},display:!1},search:"",searchitem:[],find:!0,displayitem:"",Cart:[],favorites:[]}},components:{frontpagination:c["a"]},methods:{changeitem:function(t){this.displayitem=t.target.innerText},getpages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/products?page=").concat(t);a.$http.get(i).then((function(t){a.pagesproducts=t.data.products,a.pagination=t.data.pagination,a.scrollTop()}))},getproducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/products/all");t.$http.get(a).then((function(a){t.allproducts=a.data.products,t.isLoading=!1}))},turnproduct:function(t,a){this.$router.push({name:"frontProductIn",query:{id:t,category:a}})},addtoCar:function(t,a,i){var e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart");e.status.loading=t,e.$http.get(s).then((function(n){e.Cart=n.data.data;var r=e.Cart.carts.find((function(t){return t.product.title===i})),c=0;if(r){var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart/").concat(r.id);e.$http.delete(o).then((function(){e.$bus.$emit("changecart")})),c=+r.qty}var l={product_id:t,qty:c+a};e.$http.post(s,{data:l}).then((function(t){1===a&&e.$bus.$emit("message:push",t.data.message,"info"),e.status.loading="",e.$bus.$emit("changecart")}))}))},searchprodust:function(){var t=this;t.displayitem="",t.status.display=!0,t.search?(t.displayitem=t.search,t.find=t.allproducts.every((function(a){return-1===String(a.title).indexOf(t.search)&&-1===String(a.category).indexOf(t.search)})),t.find?t.find&&t.$bus.$emit("message:push","找不到符合搜尋「".concat(t.search,"」，請重新搜尋"),"danger"):t.searchitem=t.allproducts.filter((function(a){return String(a.title).indexOf(t.search)>-1||String(a.category).indexOf(t.search)>-1})),t.status.display=!1,t.displaypage=!1):(t.displayitem="全商品",t.status.display=!1)},gettoFavorite:function(){var t=this;t.favorites=JSON.parse(localStorage.getItem("Favorites"))||[]},addtoFavorite:function(t){var a=this;if(a.favorites.length>0){var i=a.favorites.find((function(a){return t.id===a.id}));i?a.$bus.$emit("message:push","此商品已收藏","warning"):a.favorites.push(t)}else a.favorites.push(t);localStorage.setItem("Favorites",JSON.stringify(a.favorites)),a.$bus.$emit("changeFavorites")},scrollTop:function(){r()("html,body").animate({scrollTop:0},0)},markfavorite:function(t){return this.favorites.some((function(a){return t.id===a.id}))}},computed:{products:function(){var t=this;t.isLoading=!1,t.displaypage=!1;var a=[];return t.allproducts.length>10?"全商品"===t.displayitem?(a=t.pagesproducts,t.displaypage=!0):a=t.displayitem!==t.search||t.find?t.allproducts.filter((function(a){return a.category===t.displayitem})):t.searchitem:t.allproducts.length<10&&("全商品"===t.displayitem?(a=t.allproducts,t.displaypage=!0):a=t.displayitem!==t.search||t.find?t.allproducts.filter((function(a){return a.category===t.displayitem})):t.searchitem),a}},created:function(){var t=this;t.isLoading=!0,t.getproducts(),t.getpages(),t.$route.params.id?t.displayitem=t.$route.params.id:t.displayitem="全商品",t.gettoFavorite(),t.$bus.$off("addtocart"),t.$bus.$on("deletefavorites",t.gettoFavorite),t.$bus.$on("addtocart",(function(a,i,e){t.addtoCar(a,i,e)}))}},l=o,d=(i("5df6"),i("2877")),u=Object(d["a"])(l,e,s,!1,null,"8c016fbc",null);a["default"]=u.exports},"129f":function(t,a){t.exports=Object.is||function(t,a){return t===a?0!==t||1/t===1/a:t!=t&&a!=a}},1799:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("nav",{staticClass:"FrontPage",attrs:{"aria-label":"FrontPage"}},[i("ul",{staticClass:"pagination front-font-size"},[i("li",{staticClass:"page-item",class:{disabled:!t.getpagination.has_pre}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.updatapage(t.getpagination.current_page-1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.getpagination.total_pages,(function(a){return i("li",{key:a,staticClass:"page-item",class:{active:t.getpagination.current_page===a}},[i("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.updatapage(a)}}},[t._v(t._s(a))])])})),i("li",{staticClass:"page-item",class:{disabled:!t.getpagination.has_next}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.updatapage(t.getpagination.current_page+1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],n={props:["getpagination"],methods:{updatapage:function(t){this.$emit("userpage",t)}}},r=n,c=(i("233d"),i("2877")),o=Object(c["a"])(r,e,s,!1,null,"ffab0482",null);a["a"]=o.exports},"233d":function(t,a,i){"use strict";var e=i("c9a2"),s=i.n(e);s.a},"45fc":function(t,a,i){"use strict";var e=i("23e7"),s=i("b727").some,n=i("a640"),r=i("ae40"),c=n("some"),o=r("some");e({target:"Array",proto:!0,forced:!c||!o},{some:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"5df6":function(t,a,i){"use strict";var e=i("9736"),s=i.n(e);s.a},"7db0":function(t,a,i){"use strict";var e=i("23e7"),s=i("b727").find,n=i("44d2"),r=i("ae40"),c="find",o=!0,l=r(c);c in[]&&Array(1)[c]((function(){o=!1})),e({target:"Array",proto:!0,forced:o||!l},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},"841c":function(t,a,i){"use strict";var e=i("d784"),s=i("825a"),n=i("1d80"),r=i("129f"),c=i("14c3");e("search",1,(function(t,a,i){return[function(a){var i=n(this),e=void 0==a?void 0:a[t];return void 0!==e?e.call(a,i):new RegExp(a)[t](String(i))},function(t){var e=i(a,t,this);if(e.done)return e.value;var n=s(t),o=String(this),l=n.lastIndex;r(l,0)||(n.lastIndex=0);var d=c(n,o);return r(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},9736:function(t,a,i){},a623:function(t,a,i){"use strict";var e=i("23e7"),s=i("b727").every,n=i("a640"),r=i("ae40"),c=n("every"),o=r("every");e({target:"Array",proto:!0,forced:!c||!o},{every:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},a640:function(t,a,i){"use strict";var e=i("d039");t.exports=function(t,a){var i=[][t];return!!i&&e((function(){i.call(null,a||function(){throw 1},1)}))}},c975:function(t,a,i){"use strict";var e=i("23e7"),s=i("4d64").indexOf,n=i("a640"),r=i("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),d=r("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:o||!l||!d},{indexOf:function(t){return o?c.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},c9a2:function(t,a,i){}}]);
//# sourceMappingURL=chunk-57d3649a.e549616b.js.map