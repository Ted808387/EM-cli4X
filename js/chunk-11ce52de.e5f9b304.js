(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11ce52de"],{"159b":function(t,a,e){var s=e("da84"),i=e("fdbc"),c=e("17c2"),o=e("9112");for(var n in i){var r=s[n],l=r&&r.prototype;if(l&&l.forEach!==c)try{o(l,"forEach",c)}catch(d){l.forEach=c}}},"17c2":function(t,a,e){"use strict";var s=e("b727").forEach,i=e("a640"),c=e("ae40"),o=i("forEach"),n=c("forEach");t.exports=o&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var s=e("23e7"),i=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"607f":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("section",{staticClass:"Cart"},[e("div",{staticClass:"cart-bg"}),e("div",{staticClass:"container"},[e("h2",{staticClass:"text-center mt-4 mb-4 font-weight-bold"},[t._v("購物車")]),0===t.Cart.total?e("div",{staticClass:"Nothing text-center"},[e("h3",{staticClass:"font-weight-bold mb-5"},[t._v("－ 購物車無物品 －")]),e("router-link",{attrs:{to:"/frontproduct"}},[e("button",{staticClass:"btn btn-success btn-lg"},[t._v("Shopping now")])])],1):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[0!==t.Cart.total?e("table",{staticClass:"table mt-4"},[e("thead",{staticStyle:{width:"500px"}},[e("tr",[e("th",{attrs:{width:"100"}},[e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"buttom"},on:{click:function(a){return a.stopPropagation(),t.deleteall(a)}}},[t._v(" Clear ")])]),e("th",{staticClass:"productimg",attrs:{width:"150"}}),e("th",{staticClass:"align-middle"},[t._v("產品名稱")]),e("th",{staticClass:"text-center align-middle",attrs:{width:"150"}},[t._v("單價")]),e("th",{staticClass:"text-center align-middle",attrs:{width:"200"}},[t._v("數量")]),e("th",{staticClass:"align-middle",attrs:{width:"100"}},[t._v("價格")])])]),e("tbody",t._l(t.Cart.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.deleteCar(a.id)}}},[!0===t.status.loading?e("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),!1===t.status.loading?e("i",{staticClass:"far fa-trash-alt"}):t._e()])]),e("td",{staticClass:"productimg"},[e("div",{staticClass:"cart-img"},[e("img",{staticClass:"img-fluid d-block",staticStyle:{width:"100%",height:"100%","background-size":"cover","background-position":"center"},attrs:{src:a.product.imageUrl,alt:""}})])]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?e("div",{staticClass:"text-success font-weight-bold"},[t._v("Discounted")]):t._e()]),e("td",{staticClass:"text-center align-middle"},[t._v(t._s(t._f("currency")(a.product.price)))]),e("td",{staticClass:"text-center align-middle"},[e("div",{staticClass:"select-quantity"},[e("input",{staticClass:"select-down select-outline bg-white",attrs:{type:"button",value:"-"},on:{click:function(e){return t.select(a.product.id,-1,a.product.title)}}}),e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"quantity select-outline",attrs:{type:"number",placeholder:"1",min:"1",max:"100",value:"1"},domProps:{value:a.qty},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.change(a.product.id,a.qty,a.product.title):null},input:function(e){e.target.composing||t.$set(a,"qty",t._n(e.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("input",{staticClass:"select-up select-outline bg-white",attrs:{type:"button",value:"+"},on:{click:function(e){return t.select(a.product.id,1,a.product.title)}}})])]),e("td",{staticClass:"text-right align-middle"},[t._v(t._s(t._f("currency")(a.total)))])])})),0),e("tfoot",{staticClass:"font-weight-bold"},[e("tr",[e("td",{staticClass:"productimg"}),e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("總價")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.Cart.total)))])]),t.Cart.final_total!==t.Cart.total?e("tr",{staticClass:"text-primary"},[e("td",{staticClass:"productimg"}),e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("折扣價")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.Cart.final_total)))])]):t._e()])]):t._e()]),e("div",{staticClass:"col-sm-12"},[0!==t.Cart.total?e("table",{staticClass:"coupon table float-md-right mx-auto"},[e("div",{staticClass:"input-group mb-3 input-group-md"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponcode,expression:"couponcode"}],staticClass:"coupon-code form-control",attrs:{type:"text",placeholder:"請輸入優惠碼","aria-describedby":"basic-addon2"},domProps:{value:t.couponcode},on:{input:function(a){a.target.composing||(t.couponcode=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"input-group-text btn btn-outline-primary font-weight-bold",attrs:{id:"basic-addon2"},on:{click:t.addCouponCode}},[!0===t.status.loading?e("i",{staticClass:"fa fa-spinner fa-spin mr-1"}):t._e(),t._v(" 加入優惠卷 ")])])]),e("button",{staticClass:"btn btn-outline-primary font-weight-bold float-right",staticStyle:{width:"100%"},on:{click:t.toOrdercheck}},[t._v(" 購物車結算 ")])]):t._e()])])])])],1)},i=[],c=(e("99af"),e("4de4"),e("4160"),e("159b"),{data:function(){return{Cart:{},couponcode:"",isLoading:!1,status:{loading:!1}}},methods:{gettoCar:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart");t.$http.get(a).then((function(a){t.Cart=a.data.data,t.Cart.carts.sort((function(t,a){return t.product.price-a.product.price})),t.Cart.carts.forEach((function(a){if(a.qty<1){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart/").concat(a.id);t.$http.delete(e).then((function(){t.gettoCar()}))}})),t.isLoading=!1}))},deleteCar:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart/").concat(t);a.status.loading=!0,a.$http.delete(e).then((function(t){a.status.loading=!1,a.$bus.$emit("message:push",t.data.message,"danger"),a.gettoCar(),a.$bus.$emit("changecart")}))},deleteall:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart");t.$http.get(a).then((function(a){a.data.data.carts.forEach((function(a){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart/").concat(a.id);t.$http.delete(e).then((function(){t.gettoCar(),t.$bus.$emit("changecart")}))})),a&&t.$bus.$emit("message:push","清空購物車","danger")}))},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/coupon"),e={code:t.couponcode};t.status.loading=!0,t.$http.post(a,{data:e}).then((function(a){a.data.success?(t.$bus.$emit("message:push",a.data.message,"success"),t.gettoCar()):t.$bus.$emit("message:push",a.data.message,"danger"),t.status.loading=!1}))},select:function(t,a,e){var s=this;s.$bus.$emit("addtocart",t,a,e)},change:function(t,a,e){var s=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("tedcode","/cart");s.$http.get(i).then((function(i){var c=i.data.data.carts.filter((function(t){return e===t.product.title})),o=a-c[0].qty;s.$bus.$emit("addtocart",t,o,e)}))},toOrdercheck:function(){this.$router.push({name:"OrderCheck"})}},created:function(){var t=this;t.isLoading=!0,t.gettoCar(),t.$bus.$on("changecart",t.gettoCar)}}),o=c,n=e("2877"),r=Object(n["a"])(o,s,i,!1,null,null,null);a["default"]=r.exports},a640:function(t,a,e){"use strict";var s=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&s((function(){e.call(null,a||function(){throw 1},1)}))}},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-11ce52de.e5f9b304.js.map